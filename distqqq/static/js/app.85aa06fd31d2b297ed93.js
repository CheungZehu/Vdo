webpackJsonp([1,2],[,,,,,,,,,,,function(t,e,a){"use strict";a.d(e,"d",function(){return s}),a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n}),a.d(e,"c",function(){return o}),a.d(e,"e",function(){return r});var s="CHANGE_MOVIES_TAB",i="FETCH_MOVIES",n="FETCH_MOVIES_QUERY",o="CLEAR_MOVIES_QUERY",r="UPDATE_MOVIE_SEARCH_STEP"},,,,,,,,,,,,,,,function(t,e,a){"use strict";var s=a(10),i=a(134),n=a(126),o=a.n(n),r=a(125),c=a.n(r),u=a(124),l=a.n(u),v=a(121),m=a.n(v);s.default.use(i.a),e.a=new i.a({routes:[{path:"/",redirect:"/movie/home",name:"Home",component:o.a},{path:"/movie/home",name:"MovieHome",component:o.a},{path:"/movie/subject/:id",name:"MovieSubject",component:c.a},{path:"/movie/Search",name:"MovieSearch",component:l.a},{path:"/about",name:"About",component:m.a}]})},,,,,,function(t,e,a){"use strict";function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.city,i=void 0===s?"广州":s,n=e.start,r=void 0===n?0:n;return a.i(o.a)("movie/"+t,{city:i,start:r})}function i(t){var e=t.q,s=t.start,i=void 0===s?0:s;return a.i(o.a)("/movie/search",{q:e,start:i})}function n(t){return a.i(o.a)("movie/subject/"+t)}var o=a(73);a.d(e,"c",function(){return r}),e.a=s,e.b=i,e.d=n;var r={inTheaters:"in_theaters",comingSoon:"coming_soon",Top250:"top250"}},,,,,,,,,,,,,function(t,e,a){"use strict";var s=a(16),i=a(10),n=a(74);i.default.use(s.a),e.a=new s.a.Store({modules:{movie:n.a}})},function(t,e){},function(t,e){},function(t,e,a){a(116);var s=a(3)(a(67),a(130),null,null);t.exports=s.exports},,,,,,,,,,,,,,,,,,,function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(122),i=a.n(s);e.default={name:"app",components:{Copyright:i.a}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={methods:{back:function(){this.$router.go(-1)}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(16),i=a(11);e.default={name:"movieList",data:function(){return{}},props:["tabName"],computed:a.i(s.b)({subjects:function(t){return t.movie.movies[this.tabName].subjects}}),mounted:function(){this.fetchData()},beforeUpdate:function(){console.log("[beforeUpdate], tabName: "+this.tabName),this.fetchData()},destroyed:function(){console.log("[destroyed]")},methods:{ratingStar:function(t){var e=Math.round(t),a=Math.floor(e/2),s=e%2;return{star:a,half:s,left:5-a-s}},fetchData:function(){this.$store.state.movie.movies[this.tabName].subjects&&this.$store.state.movie.movies[this.tabName].subjects.length>0||this.$store.dispatch(i.a,{type:this.tabName})}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(16),i=a(11);e.default={name:"MovieSearch",data:function(){return{count:20,start:0,total:0,q:""}},computed:a.i(s.b)({subjects:function(t){return t.movie.movieQuery.subjects},text:function(t){return t.movie.movieQuery.q}}),mounted:function(){console.log("search mounted------"+Math.random()),this.getQuery()},watch:{$route:"getQuery"},methods:{ratingStar:function(t){var e=Math.round(t),a=Math.floor(e/2),s=e%2;return{star:a,half:s,left:5-a-s}},colse:function(){this.$router.push({name:"MovieHome"})},gotoTab:function(){this.$router.go(-this.$store.state.movie.searchStep),console.log(-this.$store.state.movie.searchStep),this.$store.dispatch(i.e,1),this.$store.dispatch(i.c)},search:function(){console.log("q",this.q),0!==(""+this.q).length&&(this.$store.dispatch(i.e,this.$store.state.movie.searchStep+1),this.$router.push({name:"MovieSearch",query:{q:this.q}}))},getQuery:function(){this.$route.query.q&&(this.$route.query.q!==this.$store.state.movie.movieQuery.q?(console.log("dispatch..."),this.$store.dispatch(i.b,{q:this.$route.query.q})):console.log("一样的..."))}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(26),i=a(32);e.default={name:"movieSubject",data:function(){return{movie:{rating:{},images:{},countries:[],genres:[],casts:[],directors:[],aka:[]}}},watch:{$route:function(t){this.setPage(t.params.id)}},mounted:function(){this.setPage(this.$route.params.id)},methods:{ratingStar:function(t){if(!t)return{star:0,half:0,left:0};var e=Math.round(t),a=Math.floor(e/2),s=e%2;return{star:a,half:s,left:5-a-s}},goBack:function(){s.a.go(-1)},setPage:function(t){var e=this;a.i(i.d)(t).then(function(t){e.movie=t})}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(16),i=a(123),n=a.n(i),o=a(11);e.default={data:function(){return{open:!1,docked:!0,dialog:!1,value:"movie"}},computed:a.i(s.b)({activeTab:function(t){return t.movie.tab}}),methods:{toggle:function(t){this.open=!this.open,this.docked=!t},handleTabChange:function(t){this.$store.dispatch(o.d,t)},handleActive:function(t){console.log("--------tab active-------"+t)},gotoSearch:function(){this.$router.push({name:"MovieSearch"})},page:function(t){"about"===t&&this.$router.push({name:"About"})},openDia:function(){this.dialog=!0},closeDia:function(){this.dialog=!1}},components:{Card:n.a}}},function(t,e,a){"use strict";var s=a(76),i=a.n(s),n=a(49),o=a.n(n);e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new i.a(function(a,s){o.a.get("/api/"+t,{params:e}).then(function(t){a(t.data)}).catch(function(t){return s(t)})})}},function(t,e,a){"use strict";var s,i,n,o=a(77),r=a.n(o),c=a(11),u=a(32),l=(s={},r()(s,c.a,function(t,e){console.log("获取数据"),t.movies[e.type].subjects=t.movies[e.type].subjects.concat(e.subjects),t.movies[e.type].total=t.movies[e.type].subjects.length}),r()(s,c.b,function(t,e){console.log("搜索"),t.movieQuery.subjects=e.data.subjects,console.log("222"),t.movieQuery.total=t.movieQuery.subjects.length,console.log("搜索结束")}),r()(s,c.c,function(t){t.movieQuery.total=0,console.log("退出搜索"),t.movieQuery.subjects=[]}),r()(s,c.d,function(t,e){console.log("改变tab"),t.tab=e}),r()(s,c.e,function(t,e){console.log("输入确定"),t.searchStep=e}),s),v=(i={},r()(i,c.a,function(t,e){u.a(e.type,{start:e.start||0}).then(function(a){return t.commit(c.a,{type:e.type,subjects:a.subjects})})}),r()(i,c.b,function(t,e){u.b({q:e.q}).then(function(a){return t.commit(c.b,{data:a,q:e.q})})}),r()(i,c.c,function(t){t.commit(c.c)}),r()(i,c.d,function(t,e){t.commit(c.d,e)}),r()(i,c.e,function(t,e){t.commit(c.e,e)}),i);e.a={state:{movies:(n={},r()(n,u.c.inTheaters,{total:0,subjects:[],describe:""}),r()(n,u.c.comingSoon,{total:0,subjects:[],describe:""}),r()(n,u.c.Top250,{total:0,subjects:[],describe:""}),n),movieQuery:{total:0,subjects:[],describe:"",q:""},tab:"in_theaters",searchStep:1},mutations:l,actions:v}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e,a){a(114);var s=a(3)(a(68),a(128),null,null);t.exports=s.exports},function(t,e,a){a(113);var s=a(3)(null,a(127),"data-v-39f87da1",null);t.exports=s.exports},function(t,e,a){a(118);var s=a(3)(a(69),a(132),"data-v-ac46f176",null);t.exports=s.exports},function(t,e,a){a(119);var s=a(3)(a(70),a(133),"data-v-daa11ac6",null);t.exports=s.exports},function(t,e,a){a(115);var s=a(3)(a(71),a(129),"data-v-7be221f2",null);t.exports=s.exports},function(t,e,a){a(117);var s=a(3)(a(72),a(131),"data-v-8d4fd320",null);t.exports=s.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer"},[t._v("\n\tPowered By Ralfz\n\t"),a("br"),t._v("\n\t@2017\n")])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mu-appbar",{attrs:{title:"关于"}},[a("mu-icon-button",{attrs:{icon:"arrow_back"},on:{click:t.back},slot:"left"})],1),t._v(" "),t._m(0),t._v(" "),a("mu-divider"),t._v(" "),a("mu-list",[a("mu-sub-header",[t._v("访问Github")]),t._v(" "),a("mu-paper",[a("mu-list-item",{attrs:{title:"Github"}},[a("mu-icon",{attrs:{value:"link"},slot:"left"})],1)],1),t._v(" "),a("mu-sub-header",[t._v("联系我")]),t._v(" "),a("mu-paper",[a("mu-list-item",{attrs:{title:"845517336@qq.com"}},[a("mu-icon",{attrs:{value:"email"},slot:"left"})],1),t._v(" "),a("mu-list-item",{attrs:{title:"15220036344"}},[a("mu-icon",{attrs:{value:"call"},slot:"left"})],1)],1)],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[a("div",[t._v("微豆 Vdo")]),t._v(" "),a("div",{staticClass:"about-text"},[t._v("一个移动端豆瓣Web应用")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative"}},[a("mu-icon-button",{staticClass:"icon-back",attrs:{icon:"arrow_back"},on:{click:function(e){t.goBack()}},slot:"left"}),t._v(" "),a("div",{staticClass:"image-wrap",style:"background-image: url("+t.movie.images.large+");"}),t._v(" "),a("div",{staticClass:"title-border"},[a("div",{staticClass:"title-info"},[a("div",{staticClass:"title-image"},[a("img",{attrs:{src:t.movie.images.large}})]),t._v(" "),a("div",{staticClass:"title-text"},[a("p",[t._v(t._s(t.movie.title))]),t._v(" "),a("p",[t._v(t._s(t._f("fixNum")(t.movie.rating.average)))])])])]),t._v(" "),a("div",{staticClass:"star"},[t._l(t.ratingStar(t.movie.rating.average).star,function(t){return a("mu-icon",{key:t.id,staticClass:"star-icon",attrs:{value:"star"}})}),t._v(" "),t._l(t.ratingStar(t.movie.rating.average).half,function(t){return a("mu-icon",{key:t.id,staticClass:"star-icon",attrs:{value:"star_half"}})}),t._v(" "),t._l(t.ratingStar(t.movie.rating.average).left,function(t){return a("mu-icon",{key:t.id,staticClass:"star-icon",attrs:{value:"star_border"}})})],2),t._v(" "),a("div",{staticClass:"info"},[a("p",{staticClass:"info-content"},[a("span",{staticClass:"info-title"},[t._v("原名")]),a("span",{staticClass:"info-text"},[t._v(t._s(t.movie.original_title))])]),t._v(" "),a("p",{staticClass:"info-content"},[a("span",{staticClass:"info-title"},[t._v("类型")]),a("span",{staticClass:"info-text"},[t._v(t._s(t._f("string")(t.movie.genres)))])]),t._v(" "),a("p",{staticClass:"info-content"},[a("span",{staticClass:"info-title"},[t._v("年代")]),a("span",{staticClass:"info-text"},[t._v(t._s(t.movie.year))])]),t._v(" "),a("p",{staticClass:"info-content"},[a("span",{staticClass:"info-title"},[t._v("地区")]),a("span",{staticClass:"info-text"},[t._v(t._s(t._f("string")(t.movie.countries)))])]),t._v(" "),a("p",{staticClass:"info-content"},[a("span",{staticClass:"info-title"},[t._v("又名")]),a("span",{staticClass:"info-text"},[t._v(t._s(t._f("string")(t.movie.aka)))])]),t._v(" "),a("p",{staticClass:"info-content"},[a("span",{staticClass:"info-title"},[t._v("想看人数")]),a("span",{staticClass:"info-text"},[t._v(t._s(t.movie.wish_count))])]),t._v(" "),a("p",{staticClass:"info-content"},[a("span",{staticClass:"info-title"},[t._v("看过人数")]),a("span",{staticClass:"info-text"},[t._v(t._s(t.movie.collect_count))])]),t._v(" "),a("p",{staticClass:"info-content"},[a("span",{staticClass:"info-title"},[t._v("评分人数")]),a("span",{staticClass:"info-text"},[t._v(t._s(t.movie.rating_count))])]),t._v(" "),a("p",{staticClass:"info-content"},[a("span",{staticClass:"info-title"},[t._v("短评数量")]),a("span",{staticClass:"info-text"},[t._v(t._s(t.movie.comments_count))])]),t._v(" "),a("p",{staticClass:"info-content"},[a("span",{staticClass:"info-title"},[t._v("影评数量")]),a("span",{staticClass:"info-text"},[t._v(t._s(t.movie.reviews_count))])])]),t._v(" "),a("div",{staticClass:"summary"},[t._v(t._s(t.movie.summary))]),t._v(" "),a("div",{staticClass:"author"},[a("p",{staticClass:"author-type"},[t._v("导演")]),t._v(" "),a("mu-row",t._l(t.movie.directors,function(e){return a("mu-col",{key:e.id,staticClass:"author-elem",attrs:{width:"50",tablet:"33",desktop:"25"}},[a("mu-paper",[a("div",{staticClass:"author-wrap"},[a("div",{staticClass:"author-image"},[a("div",{staticClass:"author-padding",style:"background-image:url("+(e.avatars&&e.avatars.large||"")+")"})]),t._v(" "),a("div",{staticClass:"author-name"},[t._v(t._s(e.name))])])])],1)}))],1),t._v(" "),a("div",{staticClass:"author"},[a("p",{staticClass:"author-type"},[t._v("主演")]),t._v(" "),a("mu-row",t._l(t.movie.casts,function(e){return a("mu-col",{key:e.id,staticClass:"author-elem",attrs:{width:"50",tablet:"33",desktop:"25"}},[a("mu-paper",[a("div",{staticClass:"author-wrap"},[a("div",{staticClass:"author-image"},[a("div",{staticClass:"author-padding",style:"background-image:url("+(e.avatars&&e.avatars.large||"")+")"})]),t._v(" "),a("div",{staticClass:"author-name"},[t._v(t._s(e.name))])])])],1)}))],1)],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view"),t._v(" "),a("Copyright")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"tab"}},[a("mu-drawer",{staticClass:"drawer",attrs:{open:t.open,docked:t.docked},on:{close:function(e){t.toggle()}}},[a("div",{staticClass:"drawer-pic"},[a("div",{staticClass:"drawer-title"},[t._v("微豆")]),t._v(" "),a("div",{staticClass:"drawer-description"},[t._v("一个移动端豆瓣Web应用")])]),t._v(" "),a("mu-list",{attrs:{value:"movie"},on:{itemClick:function(e){t.docked||t.toggle()},change:t.page}},[a("mu-list-item",{attrs:{value:"movie",title:"电影"}},[a("mu-icon",{attrs:{value:"movie"},slot:"left"})],1),t._v(" "),a("mu-list-item",{attrs:{value:"book",title:"图书 - 敬请期待"}},[a("mu-icon",{attrs:{value:"book"},slot:"left"})],1),t._v(" "),a("mu-list-item",{attrs:{value:"music",title:"音乐 - 敬请期待"}},[a("mu-icon",{attrs:{value:"music_note"},slot:"left"})],1),t._v(" "),a("mu-divider",{attrs:{shallowInset:""}}),t._v(" "),a("mu-list-item",{attrs:{value:"about",title:"关于"}},[a("mu-icon",{attrs:{value:"info"},slot:"left"})],1)],1)],1),t._v(" "),a("mu-paper",{attrs:{zDepth:2}},[a("mu-appbar",{attrs:{title:"电影"}},[a("mu-icon-button",{attrs:{icon:"menu"},on:{click:function(e){t.toggle(!0)}},slot:"left"}),t._v(" "),a("mu-icon-button",{attrs:{icon:"search"},on:{click:function(e){t.gotoSearch()}},slot:"right"})],1),t._v(" "),a("mu-tabs",{attrs:{value:t.activeTab},on:{change:t.handleTabChange}},[a("mu-tab",{attrs:{value:"in_theaters",title:"正在上映"},on:{active:t.handleActive}}),t._v(" "),a("mu-tab",{attrs:{value:"coming_soon",title:"即将上映"},on:{active:t.handleActive}}),t._v(" "),a("mu-tab",{attrs:{value:"top250",title:"Top250"},on:{active:t.handleActive}})],1)],1),t._v(" "),"in_theaters"===t.activeTab?a("div",[a("Card",{attrs:{"tab-name":"in_theaters"}})],1):t._e(),t._v(" "),"coming_soon"===t.activeTab?a("div",[a("Card",{attrs:{"tab-name":"coming_soon"}})],1):t._e(),t._v(" "),"top250"===t.activeTab?a("div",[a("Card",{attrs:{"tab-name":"top250"}})],1):t._e()],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("mu-row",{staticClass:"paper-row"},t._l(t.subjects,function(e){return a("mu-col",{key:e.id,staticClass:"paper-elem",attrs:{desktop:"20",width:"33",tablet:"25"}},[a("router-link",{attrs:{to:{name:"MovieSubject",params:{id:e.id}}}},[a("mu-paper",[a("div",{staticClass:"paper-border"},[a("div",{staticClass:"paper-img",style:"background-image:url("+e.images.large+")"})]),t._v(" "),a("div",{staticClass:"paper-text"},[a("p",[t._v(t._s(e.title)+t._s(e.id))]),t._v(" "),a("p",{staticClass:"star-box"},[e.rating.average>0?a("span",{staticClass:"paper-star"},[t._l(t.ratingStar(e.rating.average).star,function(t){return a("mu-icon",{key:t.id,staticClass:"star-icon",attrs:{value:"star"}})}),t._v(" "),t._l(t.ratingStar(e.rating.average).half,function(t){return a("mu-icon",{key:t.id,staticClass:"star-icon",attrs:{value:"star_half"}})}),t._v(" "),t._l(t.ratingStar(e.rating.average).left,function(t){return a("mu-icon",{key:t.id,staticClass:"star-icon",attrs:{value:"star_border"}})})],2):t._e(),t._v(" "),a("span",{staticClass:"star-rating"},[t._v(t._s(t._f("fixNum")(e.rating.average)))])])])])],1)],1)}))],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"search"}},[a("mu-paper",{staticClass:"demo-paper",attrs:{zDepth:1}},[a("mu-appbar",{staticClass:"search-bar",attrs:{title:"Title"}},[a("mu-icon-button",{staticClass:"bar-icon",attrs:{icon:"arrow_back"},on:{click:function(e){t.gotoTab()}},slot:"left"}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.q,expression:"q",modifiers:{trim:!0}}],staticClass:"bar-text",attrs:{autofocus:"autofocus",hintText:"请输入关键字"},domProps:{value:t.text,value:t.q},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.search(e)},input:function(e){e.target.composing||(t.q=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),a("mu-icon-button",{staticClass:"bar-icon",attrs:{icon:"close"},on:{click:function(e){t.colse()}},slot:"right"})],1)],1),t._v(" "),a("div",{staticClass:"result"},t._l(t.subjects,function(e){return a("router-link",{key:e.id,attrs:{to:{name:"MovieSubject",params:{id:e.id}}}},[a("mu-paper",{staticClass:"elem",attrs:{zDepth:1}},[a("div",{staticClass:"image",style:"background-image: url("+e.images.large+")"}),t._v(" "),a("div",{staticClass:"text"},[a("div",{staticClass:"name"},[a("span",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),a("span",{staticClass:"year"},[t._v(t._s(e.year))])]),t._v(" "),a("div",{staticClass:"star-list"},[e.rating.average>0?a("span",{staticClass:"star-bor"},[t._l(t.ratingStar(e.rating.average).star,function(t){return a("mu-icon",{key:t.id,staticClass:"star-icon",attrs:{value:"star"}})}),t._v(" "),t._l(t.ratingStar(e.rating.average).half,function(t){return a("mu-icon",{key:t.id,staticClass:"star-icon",attrs:{value:"star_half"}})}),t._v(" "),t._l(t.ratingStar(e.rating.average).left,function(t){return a("mu-icon",{key:t.id,staticClass:"star-icon",attrs:{value:"star_border"}})})],2):t._e(),t._v(" "),a("div",{staticClass:"star-num"},[t._v(t._s(t._f("fixNum")(e.rating.average)))])]),t._v(" "),a("div",{staticClass:"genres"},[t._v("类型："+t._s(t._f("string")(e.genres)))]),t._v(" "),a("div",{staticClass:"director"},[t._v("导演："+t._s(t._f("string")(e.directors.map(function(t){return t.name}))))]),t._v(" "),a("div",{staticClass:"cast"},[t._v("主演："+t._s(t._f("string")(e.casts.map(function(t){return t.name}))))])])])],1)}))],1)},staticRenderFns:[]}},,,,function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(10),i=a(44),n=a.n(i),o=a(46),r=(a.n(o),a(47)),c=(a.n(r),a(48)),u=a.n(c),l=a(26),v=a(45);s.default.config.productionTip=!1,s.default.use(n.a),s.default.filter("string",function(t){return t.join("/")}),s.default.filter("fixNum",function(t){return t?Number(t).toFixed(1):"暂无评分"}),new s.default({el:"#app",router:l.a,store:v.a,template:"<App/>",components:{App:u.a}})}],[137]);
//# sourceMappingURL=app.85aa06fd31d2b297ed93.js.map